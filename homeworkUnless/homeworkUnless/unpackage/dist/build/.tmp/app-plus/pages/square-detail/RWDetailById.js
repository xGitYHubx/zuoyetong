(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/square-detail/RWDetailById"],{"03d6":function(t,e,a){"use strict";a.r(e);var s=a("917f"),n=a("330e");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("50c2"),a("f68b");var u=a("2877"),c=Object(u["a"])(n["default"],s["a"],s["b"],!1,null,"34b18c45",null);e["default"]=c.exports},"330e":function(t,e,a){"use strict";a.r(e);var s=a("bfd2"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);e["default"]=n.a},"4dc5":function(t,e,a){"use strict";(function(t){a("af20"),a("921b");s(a("66fd"));var e=s(a("03d6"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"50c2":function(t,e,a){"use strict";var s=a("fbee"),n=a.n(s);n.a},"7d5b":function(t,e,a){},"917f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=(t._self._c,t.avatarDefault(t.task.avatarUrl)),s=t.__map(t.msg,function(e,a){var s=t.avatarDefault(e.avatarUrl),n=t.__map(e.photos,function(e,a){var s=t.avatarDefault(e.url);return{$orig:t.__get_orig(e),m2:s}});return{$orig:t.__get_orig(e),m1:s,l0:n}});t.$mp.data=Object.assign({},{$root:{m0:a,l1:s}})},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},bfd2:function(t,e,a){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{isCard:!0,isMine:!1,msg:[],taskImg:[],task:{},taskId:"",commentText:""}},onLoad:function(t){this.taskId=t.taskId,this.getTask(),this.getMsg()},onShow:function(){this.isMine=t.getStorageSync("account")==this.task.account},computed:{isPublishMan:function(){if(t.getStorageSync("account")==this.task.account)return!0}},methods:{changeCommentText:function(t){this.commentText=t.detail.value},IsCard:function(t){this.isCard=t.detail.value},toEditComment:function(){t.redirectTo({url:"./RWcomment?task=".concat(encodeURIComponent(JSON.stringify(this.task)))})},getTaskImg:function(){var e=this;t.request({url:this.$host+"/photo/query",data:{linkId:e.task.taskId},success:function(t){if(1==t.data.success)for(var a=0;a<t.data.result.length;a++)e.taskImg.push(t.data.result[a].url)}})},ViewImage:function(e){t.previewImage({urls:this.taskImg,current:e.currentTarget.dataset.url})},ViewCommentImg:function(e,a){for(var s=[],n=0;n<e.length;n++)s.push(e[n].url);t.previewImage({urls:s,current:s[a]})},pickBestComment:function(e){t.request({url:this.$host+"/comment/pick",method:"post",header:{Authorization:t.getStorageSync("token")},data:{commentId:e,account:t.getStorageSync("account")},success:function(e){console.log(a(e," at pages\\square-detail\\RWDetailById.vue:189")),1==e.data.success?t.showToast({title:"采用成功",icon:"success"}):(console.log(a(e," at pages\\square-detail\\RWDetailById.vue:196")),t.showToast({title:"采用失败"+e.data.message,icon:"none"}))}})},getTask:function(){var e=this;t.request({url:this.$host+"/task/query/detail",data:{taskId:e.taskId},success:function(t){console.log(a(t," at pages\\square-detail\\RWDetailById.vue:215")),1==t.data.success&&(e.task=t.data.result,e.getTaskImg())}})},sendCommen:function(){var e=this;t.showLoading({title:"评论中...",mask:!0}),t.request({url:this.$host+"/comment/publish",method:"post",header:{Authorization:t.getStorageSync("token")},data:{account:t.getStorageSync("account"),taskId:e.task.taskId,commentText:e.commentText},success:function(a){1==a.data.success?t.showToast({title:"发送成功"}):t.showToast({title:"发送失败"}),e.getMsg()},complete:function(e){t.hideLoading()}})},avatarDefault:function(t){return t||"../../static/user/avatar.png"},getMsg:function(){var e=this;t.request({url:this.$host+"/task/query/comments",method:"get",header:{Authorization:t.getStorageSync("token")},data:{taskId:this.taskId,account:t.getStorageSync("account")},success:function(t){console.log(a(t," at pages\\square-detail\\RWDetailById.vue:279")),1==t.data.success&&(e.msg=t.data.result)}})}},watch:{task:function(t,e){console.log(a(t," at pages\\square-detail\\RWDetailById.vue:290")),console.log(a(e," at pages\\square-detail\\RWDetailById.vue:291"))},msg:function(t,e){console.log(a(t," at pages\\square-detail\\RWDetailById.vue:294")),console.log(a(e," at pages\\square-detail\\RWDetailById.vue:295"))}}};e.default=s}).call(this,a("6e42")["default"],a("0de9")["default"])},f68b:function(t,e,a){"use strict";var s=a("7d5b"),n=a.n(s);n.a},fbee:function(t,e,a){}},[["4dc5","common/runtime","common/vendor"]]]);